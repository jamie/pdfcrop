/* // https://codepen.io/smargh/pen/gKdyQj
// via https://x.com/fractaledmind/status/1801191790827196652 */

/* // range input style resets */
input[type="range"] {
    -webkit-appearance: none; /* Hides the slider so that custom slider can be made */
    width: 100%; /* Specific width is required for Firefox. */
    background: transparent; /* Otherwise white in Chrome */
}
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
}
input[type="range"]:focus {
    outline: none; /* Removes the blue border. You should probably do some kind of focus styling for accessibility reasons though. */
}
input[type="range"]::-ms-track {
    width: 100%;
    cursor: pointer;

    /* Hides the slider so custom styles can be added */
    background: transparent;
    border-color: transparent;
    color: transparent;
}

/* // Base Colors */
$grey: #6c757d;
$blue: #007bff;
$white: #fff;

fieldset {
    border: none;
}

/* // Range Slider */
.range-slider {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;

    label {
        flex-basis: 100%;
    }
    input {
        flex-basis: 80%;
    }
    output {
        flex-basis: calc(10% - 20px - 2rem);
        text-align: right;
        width: 2rem;
    }
}

.range-slider.-multiple {
    position: relative;
    height: 40px;
    z-index: 1;

    input {
        width: 80%;
        position: absolute;
        top: 0;
        left: 10%;
    }
    output {
        width: calc(10% - 20px - 1rem);
        position: absolute;
        top: 20px;

        &:first-of-type {
            left: 0;
            margin-right: 1rem;
            margin-left: 0;
        }
        &:last-of-type {
            right: 0;
            margin-right: 0;
            margin-left: 1rem;
        }
    }
}

.range-slider__range {
    -webkit-appearance: none;
    height: 0.5rem;
    border-radius: 5px;
    outline: none;
    padding: 0;
    margin: 0;
    position: relative;
    /* // z-index: -1; */

    &:last-of-type {
        background: none transparent;
    }
    &:first-of-type {
        background: lightgrey;
    }

    &::before {
        content: attr(min);
        position: absolute;
        left: 0;
        top: -1.5rem;
    }
    &::after {
        content: attr(max);
        position: absolute;
        right: 0;
        top: -1.5rem;
    }

    /* // Range Handle */
    &::-webkit-slider-thumb {
        appearance: none;
        width: 1rem;
        height: 1rem;
        border: 0;
        border-radius: 50%;
        background: $blue;
        cursor: pointer;
        transition: background 0.15s ease-in-out;
        pointer-events: all;
        z-index: 1;
        position: relative;

        &:hover {
            background: $blue;
        }
    }
    &::-moz-range-thumb {
        appearance: none;
        width: 1rem;
        height: 1rem;
        border: 0;
        border-radius: 50%;
        background: $blue;
        cursor: pointer;
        transition: background 0.15s ease-in-out;
        pointer-events: all;
        position: relative;
        z-index: 1;

        &:hover {
            background: $blue;
        }
    }

    &:active::-webkit-slider-thumb,
    &:active::-moz-range-thumb {
        background: $blue;
    }
}

/* // Range Label */
.range-slider__value {
    text-align: center;
    color: $white;
    background: $grey;
}

/* // Firefox Overrides */
::-moz-range-track {
    -moz-appearance: none;
    border: 0;
    z-index: -1;
    position: relative;

    height: 0.5rem;
    border-radius: 5px;
    outline: none;
    padding: 0;
    margin: 0;
    position: relative;
    margin: 2rem 0;
}
:last-of-type::-moz-range-track {
    background: darkred;
    z-index: 11;
}
:first-of-type::-moz-range-track {
    background: darkgreen;
}

:last-of-type::-moz-range-thumb {
    background: red;
}
:first-of-type::-moz-range-thumb {
    background: green;
    z-index: 10;
}

input::-moz-focus-inner,
input::-moz-focus-outer {
    border: 0;
}
